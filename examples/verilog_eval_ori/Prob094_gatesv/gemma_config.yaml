# Configuration for Verilog optimization
max_iterations: 50
checkpoint_interval: 10
log_level: "INFO"
language: "verilog"
file_suffix: ".v"

# LLM configuration
llm:
  models:
    - name: "gemma-local"
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096
      
  # Use the same model for evaluation
  evaluator_models:
    - name: "gemma-local" 
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096

# Prompt configuration
prompt:
  system_message: |
    You are an expert Hardware Design Engineer. Your task is to implement a Verilog module based on the following description.

    Description:
    You are given a four-bit input vector in[3:0]. We want to know some
    relationships between each bit and its neighbour:
    
      (1) out_both: Each bit of this output vector should indicate whether
      both the corresponding input bit and its neighbour to the left (higher
      index) are '1'. For example, out_both[2] should indicate if in[2] and
      in[3] are both 1. Since in[3] has no neighbour to the left, the answer
      is obvious so we don't need to know out_both[3].
    
      (2) out_any: Each bit of this output vector should indicate whether any
      of the corresponding input bit and its neighbour to the right are '1'.
      For example, out_any[2] should indicate if either in[2] or in[1] are 1.
      Since in[0] has no neighbour to the right, the answer is obvious so we
      don't need to know out_any[0].
    
      (3) out_different: Each bit of this output vector should indicate
      whether the corresponding input bit is different from its neighbour to
      the left. For example, out_different[2] should indicate if in[2] is
      different from in[3]. For this part, treat the vector as wrapping
      around, so in[3]'s neighbour to the left is in[0].

    Interface:
    module TopModule (
      input [3:0] in,
      output [2:0] out_both,
      output [3:1] out_any,
      output [3:0] out_different
    );

    Requirements:
    - Implement the module logic using `assign` statements where possible.
    - Follow Verilog-2001 standards.
    - Output ONLY the Verilog module code.
    - Do NOT include the testbench.

  # Reduce context usage
  num_top_programs: 0
  num_diverse_programs: 0
  include_artifacts: false

# Database configuration
database:
  population_size: 10 
  archive_size: 5
  num_islands: 1
  programs_per_island: 10
  elite_selection_ratio: 0.2
  exploitation_ratio: 0.7
  
  # Embedding model (CPU offloaded)
  embedding_model: "embedding_models/Nomic-Embed-Code/nomic-embed-code-q5_k_m.gguf"
  similarity_threshold: 0.95

# Evaluator configuration
evaluator:
  timeout: 30
  parallel_evaluations: 2

# Evolution settings
diff_based_evolution: false 
max_code_length: 5000
