# Configuration for Verilog optimization
max_iterations: 50
checkpoint_interval: 10
log_level: "INFO"
language: "verilog"
file_suffix: ".v"

# LLM configuration
llm:
  models:
    - name: "gemma-local"
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096
      
  # Use the same model for evaluation
  evaluator_models:
    - name: "gemma-local" 
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096

# Prompt configuration
prompt:
  system_message: |
    You are an expert Hardware Design Engineer. Your task is to implement a Verilog module based on the following description.

    Description:
    We want to create a timer with one input that:
    
      (1) is started when a particular input pattern (1101) is detected,
      (2) shifts in 4 more bits to determine the duration to delay,
      (3) waits for the counters to finish counting, and
      (4) notifies the user and waits for the user to acknowledge the timer.
    
    The serial data is available on the data input pin. When the pattern 1101
    is received, the circuit must then shift in the next 4 bits,
    most-significant-bit first. These 4 bits determine the duration of the
    timer delay, referred to as delay[3:0]. After that, the state machine
    asserts its counting output to indicate it is counting. Once the 1101 and
    delay[3:0] have been read, the circuit no longer looks at the data input
    until it resumes searching after everything else is done.
    
    The state machine must count for exactly (delay[3:0] + 1) * 1000 clock
    cycles. e.g., delay=0 means count 1000 cycles, and delay=5 means count
    6000 cycles. Also output the current remaining time. This should be equal
    to delay for 1000 cycles, then delay-1 for 1000 cycles, and so on until
    it is 0 for 1000 cycles.
    
    When the circuit isn't counting, the count[3:0] output is don't-care
    (whatever value is convenient for you to implement). At that point, the
    circuit must assert done to notify the user the timer has timed out, and
    waits until input ack is 1 before being reset to look for the next
    occurrence of the start sequence (1101).
    
    The circuit should reset into a state where it begins searching for the
    input sequence 1101. The reset signal is active high synchronous.

    Interface:
    module TopModule (
      input wire clk,
      input wire reset,
      input wire data,
      output wire [3:0] count,
      output reg counting,
      output reg done,
      input wire ack
    );

    Requirements:
    - Implement the module logic using `assign` statements where possible.
    - Follow Verilog-2001 standards.
    - Output ONLY the Verilog module code.
    - Do NOT include the testbench.

  # Reduce context usage
  num_top_programs: 0
  num_diverse_programs: 0
  include_artifacts: false

# Database configuration
database:
  population_size: 10 
  archive_size: 5
  num_islands: 1
  programs_per_island: 10
  elite_selection_ratio: 0.2
  exploitation_ratio: 0.7
  
  # Embedding model (CPU offloaded)
  embedding_model: "embedding_models/Nomic-Embed-Code/nomic-embed-code-q5_k_m.gguf"
  similarity_threshold: 0.95

# Evaluator configuration
evaluator:
  timeout: 30
  parallel_evaluations: 2

# Evolution settings
diff_based_evolution: false 
max_code_length: 5000
