# Configuration for Verilog optimization
max_iterations: 50
checkpoint_interval: 10
log_level: "INFO"
language: "verilog"
file_suffix: ".v"

# LLM configuration
llm:
  models:
    - name: "gemma-local"
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096
      
  # Use the same model for evaluation
  evaluator_models:
    - name: "gemma-local" 
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096

# Prompt configuration
prompt:
  system_message: |
    You are an expert Hardware Design Engineer. Your task is to implement a Verilog module based on the following description.

    Description:
    Rule 110 is a one-dimensional cellular automaton with interesting
    properties (such as being Turing-complete). There is a one-dimensional
    array of cells (on or off). At each time step, the state of each cell
    changes. In Rule 110, the next state of each cell depends only on itself
    and its two neighbours, according to the following table:
    
      Left[i+1] | Center[i] | Right[i-1] | Center's next state 
      1         | 1         | 1          | 0
      1         | 1         | 0          | 1
      1         | 0         | 1          | 1
      1         | 0         | 0          | 0
      0         | 1         | 1          | 1
      0         | 1         | 0          | 1
      0         | 0         | 1          | 1
      0         | 0         | 0          | 0
    
    In this circuit, create a 512-cell system (q[511:0]), and advance by one
    time step each clock cycle. The synchronous active high load input
    indicates the state of the system should be loaded with data[511:0].
    Assume the boundaries (q[-1] and q[512], if they existed) are both zero (off).

    Interface:
    module TopModule (
      input clk,
      input load,
      input [511:0] data,
      output reg [511:0] q
    );

    Requirements:
    - Implement the module logic using `assign` statements where possible.
    - Follow Verilog-2001 standards.
    - Output ONLY the Verilog module code.
    - Do NOT include the testbench.

  # Reduce context usage
  num_top_programs: 0
  num_diverse_programs: 0
  include_artifacts: false

# Database configuration
database:
  population_size: 10 
  archive_size: 5
  num_islands: 1
  programs_per_island: 10
  elite_selection_ratio: 0.2
  exploitation_ratio: 0.7
  
  # Embedding model (CPU offloaded)
  embedding_model: "embedding_models/Nomic-Embed-Code/nomic-embed-code-q5_k_m.gguf"
  similarity_threshold: 0.95

# Evaluator configuration
evaluator:
  timeout: 30
  parallel_evaluations: 2

# Evolution settings
diff_based_evolution: false 
max_code_length: 5000
