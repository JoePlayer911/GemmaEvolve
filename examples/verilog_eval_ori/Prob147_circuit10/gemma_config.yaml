# Configuration for Verilog optimization
max_iterations: 50
checkpoint_interval: 10
log_level: "INFO"
language: "verilog"
file_suffix: ".v"

# LLM configuration
llm:
  models:
    - name: "gemma-local"
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096
      
  # Use the same model for evaluation
  evaluator_models:
    - name: "gemma-local" 
      model_path: "/home/jonathan13/GemmaEvolve/gemma-3-12b-it-Q8_0.gguf"
      n_ctx: 8192
      n_gpu_layers: -1
      temperature: 0.7
      top_p: 0.95
      max_tokens: 4096

# Prompt configuration
prompt:
  system_message: |
    You are an expert Hardware Design Engineer. Your task is to implement a Verilog module based on the following description.

    Description:
    This is a sequential circuit. The circuit consists of combinational logic
    and one bit of memory (i.e., one flip-flop). The output of the flip-flop
    has been made observable through the output state.
    
      Read the simulation waveforms to determine what the circuit does, then implement it.
    
      time            clk             a               b               state           q
      0ns             0               1               x               x               x
      5ns             1               1               x               x               x
      10ns            0               0               0               x               x
      15ns            1               0               0               0               0
      20ns            0               0               0               0               0
      25ns            1               0               0               0               0
      30ns            0               0               0               0               0
      35ns            1               0               0               0               0
      40ns            0               0               0               0               0
      45ns            1               0               1               0               1
      50ns            0               0               1               0               1
      55ns            1               1               0               0               1
      60ns            0               1               0               0               1
      65ns            1               1               1               0               0
      70ns            0               1               1               0               0
      75ns            1               0               0               1               1
      80ns            0               0               0               1               1
      85ns            1               1               1               0               0
      90ns            0               1               1               0               0
      95ns            1               1               1               1               1
      100ns           0               1               1               1               1
      105ns           1               1               1               1               1
      110ns           0               1               1               1               1
      115ns           1               1               0               1               0
      120ns           0               1               0               1               0
      125ns           1               0               1               1               0
      130ns           0               0               1               1               0
      135ns           1               0               0               1               1
      140ns           0               0               0               1               1
      145ns           1               0               0               0               0
      150ns           0               0               0               0               0
      155ns           1               0               0               0               0
      160ns           0               0               0               0               0
      165ns           1               0               0               0               0
      170ns           0               0               0               0               0
      175ns           1               0               0               0               0
      180ns           0               0               0               0               0
      185ns           1               0               0               0               0
      190ns           0               0               0               0               0

    Interface:
    module TopModule (
      input clk,
      input a,
      input b,
      output q,
      output state
    );

    Requirements:
    - Implement the module logic using `assign` statements where possible.
    - Follow Verilog-2001 standards.
    - Output ONLY the Verilog module code.
    - Do NOT include the testbench.

  # Reduce context usage
  num_top_programs: 0
  num_diverse_programs: 0
  include_artifacts: false

# Database configuration
database:
  population_size: 10 
  archive_size: 5
  num_islands: 1
  programs_per_island: 10
  elite_selection_ratio: 0.2
  exploitation_ratio: 0.7
  
  # Embedding model (CPU offloaded)
  embedding_model: "embedding_models/Nomic-Embed-Code/nomic-embed-code-q5_k_m.gguf"
  similarity_threshold: 0.95

# Evaluator configuration
evaluator:
  timeout: 30
  parallel_evaluations: 2

# Evolution settings
diff_based_evolution: false 
max_code_length: 5000
